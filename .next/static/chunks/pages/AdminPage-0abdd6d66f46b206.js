(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[532],{861:()=>{throw Error("Module build failed: Error: Final loader (../../node_modules/next/dist/build/webpack/loaders/error-loader.js) didn't return a Buffer or String\n    at processResult (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:407369)\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:408906\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:8727\n    at iterateNormalLoaders (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5565)\n    at iterateNormalLoaders (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5650)\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5879\n    at runSyncOrAsync (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:4185)\n    at iterateNormalLoaders (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5782)\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5426\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:408396")},2391:(e,r,n)=>{"use strict";n.d(r,{A:()=>d});var t=n(7876);n(4232);var a=n(9149);n(3743);let d=function(){let e=(0,a.Zp)();return(0,t.jsxs)("header",{className:"header",children:[(0,t.jsx)("div",{className:"logo",children:"پرسا تجارت"}),(0,t.jsx)("button",{className:"admin-btn",onClick:()=>e("/admin"),children:"ورود به ادمین"})]})}},3743:()=>{throw Error("Module build failed: Error: Final loader (../../node_modules/next/dist/build/webpack/loaders/error-loader.js) didn't return a Buffer or String\n    at processResult (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:407369)\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:408906\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:8727\n    at iterateNormalLoaders (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5565)\n    at iterateNormalLoaders (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5650)\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5879\n    at runSyncOrAsync (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:4185)\n    at iterateNormalLoaders (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5782)\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5426\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:408396")},5575:(e,r,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/AdminPage",function(){return n(7421)}])},5855:()=>{throw Error("Module build failed: Error: Final loader (../../node_modules/next/dist/build/webpack/loaders/error-loader.js) didn't return a Buffer or String\n    at processResult (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:407369)\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:408906\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:8727\n    at iterateNormalLoaders (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5565)\n    at iterateNormalLoaders (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5650)\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5879\n    at runSyncOrAsync (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:4185)\n    at iterateNormalLoaders (C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5782)\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\loader-runner\\LoaderRunner.js:1:5426\n    at C:\\Users\\Aria\\node_modules\\next\\dist\\compiled\\webpack\\bundle5.js:29:408396")},7421:(e,r,n)=>{"use strict";n.r(r),n.d(r,{default:()=>_});var t=n(7876),a=n(4232),d=n(2391);n(861);let s=n(3601).env.REACT_APP_API||"https://parsa-trade-server.onrender.com",o=function(e){let{onLogin:r}=e,[n,d]=(0,a.useState)(""),[o,i]=(0,a.useState)(""),[l,u]=(0,a.useState)(""),c=async e=>{e.preventDefault();try{let e=await fetch("".concat(s,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,password:o})}),t=await e.json();e.ok?r(t.token):u(t.message||"ورود ناموفق")}catch(e){u("خطا در ارتباط با سرور")}};return(0,t.jsx)("div",{className:"admin-login-container",children:(0,t.jsxs)("form",{onSubmit:c,className:"admin-login-form",children:[(0,t.jsx)("h2",{children:"ورود مدیر"}),(0,t.jsx)("input",{type:"text",placeholder:"نام کاربری",value:n,onChange:e=>d(e.target.value),required:!0}),(0,t.jsx)("input",{type:"password",placeholder:"رمز عبور",value:o,onChange:e=>i(e.target.value),required:!0}),l&&(0,t.jsx)("p",{className:"error",children:l}),(0,t.jsx)("button",{type:"submit",children:"ورود"})]})})},i=n(3601).env.REACT_APP_API||"https://parsa-trade-server.onrender.com",l=function(e){let{product:r,onDelete:n,onEdit:a}=e;return(0,t.jsxs)("div",{className:"admin-product-card",children:[r.image&&(0,t.jsx)("img",{src:"".concat(i).concat(r.image),alt:r.name,style:{width:"100%",height:"auto",marginBottom:10}}),(0,t.jsx)("h4",{children:r.name}),(0,t.jsx)("p",{children:r.description}),(0,t.jsxs)("p",{children:["قیمت: ",r.price," تومان"]}),(0,t.jsxs)("p",{children:["دسته: ",r.category]}),(0,t.jsx)("button",{onClick:()=>n(r.id),children:"حذف"}),(0,t.jsx)("button",{onClick:()=>a(r),children:"ویرایش"})]})},u=function(e){let{products:r,onDelete:n,onEdit:a}=e;return(0,t.jsx)("div",{className:"admin-product-list",children:r.map(e=>(0,t.jsx)(l,{product:e,onDelete:n,onEdit:a},e.id))})};var c=n(7011),m=n(3096);let p=n(3601).env.REACT_APP_API||"https://parsa-trade-server.onrender.com",h=function(e){let{onAdd:r,onUpdate:n,editingProduct:d}=e,[s,o]=(0,a.useState)({name:"",description:"",price:"",category:"",image:""}),[i,l]=(0,a.useState)(null);(0,a.useEffect)(()=>{d&&o(d)},[d]);let u=e=>{o((0,m._)((0,c._)({},s),{[e.target.name]:e.target.value}))},h=async e=>{e.preventDefault();let t=s.image;if(i){let e=new FormData;e.append("image",i);let r=await fetch("".concat(p,"/upload"),{method:"POST",body:e});t=(await r.json()).imageUrl}let a=(0,m._)((0,c._)({},s),{price:Number(s.price),image:t});d?n(a):r(a),o({name:"",description:"",price:"",category:"",image:""}),l(null)};return(0,t.jsxs)("form",{onSubmit:h,className:"add-form",children:[(0,t.jsx)("h3",{children:d?"ویرایش محصول":"افزودن محصول جدید"}),(0,t.jsx)("input",{name:"name",type:"text",placeholder:"نام",value:s.name,onChange:u,required:!0}),(0,t.jsx)("input",{name:"description",type:"text",placeholder:"توضیحات",value:s.description,onChange:u,required:!0}),(0,t.jsx)("input",{name:"price",type:"number",placeholder:"قیمت",value:s.price,onChange:u,required:!0}),(0,t.jsx)("input",{name:"category",type:"text",placeholder:"دسته‌بندی",value:s.category,onChange:u,required:!0}),(0,t.jsx)("input",{type:"file",onChange:e=>{l(e.target.files[0])}}),(0,t.jsx)("button",{type:"submit",children:d?"ذخیره تغییرات":"افزودن"})]})};n(5855);let j=n(3601).env.REACT_APP_API||"https://parsa-trade-server.onrender.com",x=function(e){let{token:r}=e,[n,d]=(0,a.useState)([]),[s,o]=(0,a.useState)(null),i=async()=>{try{let e=await fetch("".concat(j,"/products")),r=await e.json();d(r)}catch(e){console.error("خطا در دریافت محصولات:",e)}};(0,a.useEffect)(()=>{i()},[]);let l=async e=>{await fetch("".concat(j,"/products/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(r)}}),i()},c=async e=>{await fetch("".concat(j,"/products"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)}),i()},m=async e=>{await fetch("".concat(j,"/products/").concat(e.id),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},body:JSON.stringify(e)}),o(null),i()};return(0,t.jsxs)("div",{className:"admin-panel",children:[(0,t.jsx)("h2",{children:"پنل مدیریت محصولات"}),(0,t.jsx)(h,{onAdd:c,onUpdate:m,editingProduct:s}),(0,t.jsx)(u,{products:n,onDelete:l,onEdit:o})]})},_=function(){let[e,r]=(0,a.useState)(null);return(0,t.jsxs)("div",{children:[(0,t.jsx)(d.A,{}),e?(0,t.jsx)(x,{token:e}):(0,t.jsx)(o,{onLogin:e=>{r(e)}})]})}}},e=>{var r=r=>e(e.s=r);e.O(0,[593,587,636,792],()=>r(5575)),_N_E=e.O()}]);